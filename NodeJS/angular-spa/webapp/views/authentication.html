<h2>Authentication</h2>

<div class="container">
	<div class="row" ng-show="view == 'input'">
		<div class="form-group">
			<label for="certificateSelect">Choose a certificate</label>
			<select id="certificateSelect" class="form-control" ng-options="getCertificateDisplayName(cert) for cert in certificates" ng-model="selectedCertificate">
				<option value="">Select ...</option>
			</select>
		</div>

		<button id="signButton" type="button" class="btn btn-primary" ng-click="signIn()">Sign In</button>
		<button id="refreshButton" type="button" class="btn btn-default" ng-click="reloadCertificates()">Refresh Certificates</button>
	</div>
	
	<div class="row" ng-show="view == 'success'">

		<h3>User authenticated</h3>

		<p>
			User information:
		<ul>
			<li>Subject: {{ certInfo.subjectName.commonName }}</li>
			<li>Email: {{ certInfo.emailAddress }}</li>
			<li>
				ICP-Brasil fields
				<ul>
					<li>Tipo de certificado: {{ certInfo.pkiBrazil.certificateType }}</li>
					<li>CPF: {{ certInfo.pkiBrazil.cpf }}</li>
					<li>Responsavel: {{ certInfo.pkiBrazil.responsavel }}</li>
					<li>Empresa: {{ certInfo.pkiBrazil.companyName }}</li>
					<li>CNPJ: {{ certInfo.pkiBrazil.cnpj }}</li>
				</ul>
			</li>
		</ul>
		</p>
	</div>
	
	<div class="row" ng-show="view == 'fail'">
        <h3>User not authenticated</h3>
        
		<p> Validation results: </p>
		
        <br>
        <textarea ng-model="validationResultsString" cols="100" rows="25" id="validationResults"></textarea>
        <br>
        <button type="button" class="btn btn-primary btn-lg" ng-click="back()">Back</button>
    </div>

</div>
